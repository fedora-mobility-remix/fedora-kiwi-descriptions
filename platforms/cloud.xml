<image>
	<profiles>
		<profile name="CloudCore" description="Cloud spin core packages">
			<requires profile="BootCore"/>
		</profile>
		<profile name="Cloud-Azure" description="Azure Guest Image">
			<requires profile="CloudCore"/>
		</profile>
		<profile name="Cloud-AmazonEC2" description="Amazon EC2 HVM Guest Image">
			<requires profile="CloudCore"/>
		</profile>
		<profile name="Cloud-GCE" description="GCE Guest Image">
			<requires profile="CloudCore"/>
		</profile>
		<profile name="Cloud-OpenStack" description="OpenStack Guest Image">
			<requires profile="CloudCore"/>
		</profile>
	</profiles>
	<preferences profiles="Cloud-Azure">
		<type image="oem" filesystem="btrfs" kernelcmdline="no_timer_check net.ifnames=0 console=tty1 console=ttyS0,115200n8" devicepersistency="by-uuid" formatoptions="force_size" format="vhd-fixed" bootpartition="true" bootpartsize="1000" bootfilesystem="ext4" efipartsize="100" firmware="uefi" fsmountoptions="compress=zstd:1" btrfs_root_is_subvolume="true" btrfs_set_default_volume="false" rootfs_label="fedora">
			<bootloader name="grub2" console="serial" timeout="0"/>
			<systemdisk>
				<volume name="@root=root"/>
				<volume name="home" parent="/"/>
				<volume name="var" parent="/"/>
			</systemdisk>
			<size unit="G">5</size>
			<oemconfig>
				<oem-resize>false</oem-resize>
			</oemconfig>
		</type>
	</preferences>
	<preferences profiles="Cloud-AmazonEC2">
		<type image="oem" filesystem="btrfs" kernelcmdline="no_timer_check net.ifnames=0 console=tty1 console=ttyS0,115200n8" devicepersistency="by-uuid" bootpartition="true" bootpartsize="1000" bootfilesystem="ext4" efipartsize="100" firmware="uefi" fsmountoptions="compress=zstd:1" btrfs_root_is_subvolume="true" btrfs_set_default_volume="false" rootfs_label="fedora">
			<bootloader name="grub2" timeout="0"/>
			<size unit="G">5</size>
			<systemdisk>
				<volume name="@root=root"/>
				<volume name="home" parent="/"/>
				<volume name="var" parent="/"/>
			</systemdisk>
			<oemconfig>
				<oem-resize>false</oem-resize>
			</oemconfig>
		</type>
	</preferences>
	<preferences profiles="Cloud-GCE">
		<type image="oem" filesystem="btrfs" kernelcmdline="no_timer_check net.ifnames=0 console=ttyS0,38400n8d" devicepersistency="by-uuid" bootpartition="true" bootpartsize="1000" bootfilesystem="ext4" efipartsize="100" format="gce" firmware="uefi" fsmountoptions="compress=zstd:1" btrfs_root_is_subvolume="true" btrfs_set_default_volume="false" rootfs_label="fedora">
			<bootloader name="grub2" timeout="0"/>
			<size unit="G">5</size>
			<systemdisk>
				<volume name="@root=root"/>
				<volume name="home" parent="/"/>
				<volume name="var" parent="/"/>
			</systemdisk>
			<oemconfig>
				<oem-resize>false</oem-resize>
			</oemconfig>
		</type>
	</preferences>
	<preferences profiles="Cloud-OpenStack">
		<type image="oem" filesystem="btrfs" kernelcmdline="no_timer_check net.ifnames=0 console=tty1 console=ttyS0,115200n8" devicepersistency="by-uuid" bootpartition="true" bootpartsize="1000" bootfilesystem="ext4" efipartsize="100" firmware="uefi" format="qcow2" fsmountoptions="compress=zstd:1" btrfs_root_is_subvolume="true" btrfs_set_default_volume="false" rootfs_label="fedora">
			<bootloader name="grub2" timeout="0"/>
			<size unit="G">5</size>
			<systemdisk>
				<volume name="@root=root"/>
				<volume name="home" parent="/"/>
				<volume name="var" parent="/"/>
			</systemdisk>
			<oemconfig>
				<oem-resize>false</oem-resize>
			</oemconfig>
		</type>
	</preferences>
	<packages type="image" patternType="plusRecommended" profiles="CloudCore">
		<namedCollection name="cloud-server-environment"/>
		<ignore name="dracut-config-rescue"/>
		<ignore name="firewalld"/>
		<ignore name="kernel"/>
		<ignore name="*-firmware"/>
		<ignore name="geolite2-city"/>
		<ignore name="geolite2-country"/>
		<ignore name="plymouth"/>
		<package name="python3-dnf-plugin-tracer"/>
		<package name="glibc-langpack-en"/>
	</packages>
	<packages type="image" patternType="plusRecommended" profiles="Cloud-Azure">
		<package name="WALinuxAgent"/>
	</packages>
	<packages type="image" patternType="plusRecommended" profiles="Cloud-GCE">
		<package name="google-compute-engine-guest-configs"/>
		<package name="google-compute-engine-oslogin"/>
		<package name="google-guest-agent"/>
	</packages>
	<packages type="image" patternType="plusRecommended" profiles="Cloud-OpenStack">
		<package name="qemu-guest-agent"/>
	</packages>
	<packages type="uninstall" profiles="Cloud-GCE">
		<package name="cloud-init"/>
	</packages>
</image>
